{% extends "layout.html" %}
{% block body %}
<body>
	<h1>Enter your query:</h1>
	<form id="test" method="POST" action="">
		<div class="speech">
			<input type="text" name="query" id="transcript" placeholder="speak"><br>
			<!-- <img onclick="startDictation()" src="http://via.placeholder.com/350x150"><br> -->
			<i onclick="startDictation()" class="fa fa-microphone" aria-hidden="true"></i>
			<input type="submit" value="Submit">
		</div>
	</form>

	<script>
  function startDictation() {

    if (window.hasOwnProperty('webkitSpeechRecognition')) {

      var recognition = new webkitSpeechRecognition();

      recognition.continuous = false;
      recognition.interimResults = false;

      recognition.lang = "en-US";
      recognition.start();

      recognition.onresult = function(e) {
        document.getElementById('transcript').value
                                 = e.results[0][0].transcript;
        recognition.stop();
        // document.getElementById('test').submit();
      };

      recognition.onerror = function(e) {
        recognition.stop();
      }

    }
  }
	</script>
</body>
{% endblock %}
